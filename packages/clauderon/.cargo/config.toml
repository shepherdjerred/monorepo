# Faster linking and build configuration
# See: https://doc.rust-lang.org/cargo/reference/config.html

[registries.crates-io]
# Use sparse protocol for faster crate index updates (~60% faster)
protocol = "sparse"

[build]
# Use all available CPU cores
jobs = -1

# Use mold linker on Linux (fastest available, ~5-10x faster than ld)
# Install: https://github.com/rui314/mold
# Falls back to lld if mold isn't available
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold"]

[target.aarch64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold"]

# On macOS, use lld for faster linking (~2x faster than ld64)
# Install: brew install lld
[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-fuse-ld=/opt/homebrew/bin/ld64.lld"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-arg=-fuse-ld=/opt/homebrew/bin/ld64.lld"]

[net]
# Retry downloads on transient failures
retry = 3
