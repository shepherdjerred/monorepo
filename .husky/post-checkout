#!/usr/bin/env sh

# post-checkout hook receives three parameters:
# $1 = ref of previous HEAD
# $2 = ref of new HEAD
# $3 = flag indicating whether it was a branch checkout (1) or file checkout (0)

# Only run on branch checkout
if [ "$3" = "0" ]; then
  exit 0
fi

# Only run when creating a new worktree
# When a worktree is created, the previous HEAD is all zeros
if [ "$1" != "0000000000000000000000000000000000000000" ]; then
  exit 0
fi

echo "ðŸ”§ New worktree detected! Running setup..."

mise run dev

echo "âœ… Worktree setup complete!"
